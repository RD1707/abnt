/* --- VARIÁVEIS E RESET --- */
:root {
    --primary: #2c3e50;
    --secondary: #3498db;
    --success: #27ae60;
    --danger: #e74c3c;
    --warning: #f39c12;
    --light: #ecf0f1;
    --dark: #2c3e50;
    --gray: #95a5a6;
    --border: #ddd;
    --shadow: rgba(0, 0, 0, 0.1);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

/* --- ESTRUTURA GERAL E FORMULÁRIO --- */
body {
    display: flex;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    margin: 0;
    color: #333;
    line-height: 1.6;
}

.sidebar {
    width: 420px;
    padding: 25px;
    background-color: #fff;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    overflow-y: auto;
    height: 100vh;
    position: sticky;
    top: 0;
}

.sidebar-header {
    text-align: center;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
}
.sidebar-header h2 {
    color: var(--primary); margin-bottom: 8px; font-size: 24px; display: flex;
    align-items: center; justify-content: center; gap: 10px;
}
.sidebar-header p { font-size: 15px; color: var(--gray); }

.form-section {
    background-color: #fdfdfd; border-radius: 8px; padding: 15px;
    margin-bottom: 20px; border-left: 4px solid var(--secondary);
}
.form-section h4 {
    margin-top: 0; margin-bottom: 15px; color: var(--primary); display: flex;
    align-items: center; gap: 8px; font-size: 16px;
}
.form-group { margin-bottom: 15px; }

form label { display: block; margin-bottom: 6px; font-size: 14px; color: #555; font-weight: 500; }
form input, form textarea {
    width: 100%; padding: 10px; margin-top: 5px; border: 1px solid var(--border);
    border-radius: 4px; font-size: 14px; transition: border 0.3s;
}
form input:focus, form textarea:focus {
    border-color: var(--secondary); outline: none;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}
form input.erro, form textarea.erro { border-color: var(--danger); }
form small { font-size: 12px; color: var(--gray); margin-top: 5px; display: block; }

.form-buttons { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
form button {
    padding: 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 15px;
    transition: all 0.3s; display: flex; align-items: center; justify-content: center;
    gap: 8px; font-weight: 600;
}
form button[type="submit"] { background-color: var(--secondary); color: white; }
form button[type="submit"]:hover { background-color: #2980b9; }
#btn-imprimir { background-color: var(--success); color: white; }
#btn-imprimir:hover { background-color: #219653; }
#btn-reset { background-color: var(--light); color: var(--dark); }
#btn-reset:hover { background-color: #d5dbdb; }

.content { flex-grow: 1; padding: 25px; overflow-y: auto; height: 100vh; background-color: #f0f2f5; }
.preview-container { display: flex; flex-direction: column; gap: 30px; width: 100%; max-width: 800px; margin: 0 auto; }

/* --- ESTILO DA PÁGINA A4 (ABNT NBR 14724) --- */
.pagina-a4 {
    background: white; width: 21cm; min-height: 29.7cm;
    /* Margens ABNT: Superior: 3cm, Esquerda: 3cm, Inferior: 2cm, Direita: 2cm */
    padding: 3cm 2cm 2cm 3cm;
    box-sizing: border-box; box-shadow: 0 0 20px rgba(0,0,0,0.15);
    font-family: 'Times New Roman', Times, serif; font-size: 12pt;
    line-height: 1.5; color: black;
    display: flex; flex-direction: column; position: relative;
}

.maiusculo { text-transform: uppercase; }
.centralizado { text-align: center; }
.negrito { font-weight: bold; }

/* --- ESTRUTURA COMUM CAPA E FOLHA DE ROSTO --- */
.cabecalho-pagina { text-align: center; line-height: 1.2; }
.cabecalho-pagina p { margin: 2px 0; }

.conteudo-meio { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; text-align: center; }
.titulo-trabalho { font-weight: bold; font-size: 14pt; margin: 2cm 0; }
.subtitulo-trabalho { font-size: 12pt; margin-top: -1.5cm; margin-bottom: 2cm; }
.autor-nome { margin-bottom: auto; /* Empurra para o topo do seu container */ }
.rodape-pagina { text-align: center; margin-top: auto; /* Empurra para o fundo */ }

/* --- FOLHA DE ROSTO (ABNT) --- */
.nota-apresentacao {
    font-size: 12pt; text-align: justify; line-height: 1.5;
    /* Recuo de 8cm da margem esquerda da página (não do miolo) */
    padding-left: 8cm; 
    margin-top: 4cm;
}
.nota-apresentacao p { margin-bottom: 12pt; }

/* --- SUMÁRIO (ABNT NBR 6027) --- */
.titulo-sumario { font-weight: bold; text-align: center; margin-bottom: 2cm; }

.sumario-item {
    display: flex; justify-content: space-between; margin: 10pt 0;
    line-height: 1.5;
}
.sumario-item .titulo {
    text-align: left; white-space: nowrap; overflow: hidden;
    text-overflow: ellipsis; padding-right: 5px;
}
.sumario-item .pagina-num { padding-left: 5px; }

/* Linha pontilhada com flexbox */
.sumario-item .preenchimento-pontilhado {
    flex-grow: 1;
    border-bottom: 1px dotted #000;
    position: relative;
    bottom: 4px;
}

/* Estilos de Nível */
.sumario-item-numerado.nivel-1 .titulo { margin-left: 0; font-weight: bold; }
.sumario-item-numerado.nivel-2 .titulo { margin-left: 1.25cm; }
.sumario-item-numerado.nivel-3 .titulo { margin-left: 2.5cm; }
.sumario-item-numerado.nivel-4 .titulo { margin-left: 3.75cm; }

.sumario-item-sem-numero .titulo {
    font-weight: bold;
    text-transform: uppercase;
}
.sem-sumario { text-align: center; font-style: italic; color: var(--gray); margin-top: 3cm; }


/* --- TOAST NOTIFICATIONS --- */
.toast {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 12px 24px;
    border-radius: 4px; color: white; font-weight: 500; z-index: 1000; opacity: 0;
    transition: opacity 0.3s, transform 0.3s;
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }
.toast.success { background-color: var(--success); }
.toast.error { background-color: var(--danger); }
.toast.warning { background-color: var(--warning); }


/* --- IMPRESSÃO --- */
@media print {
    body { display: block; background-color: white; }
    .sidebar, #btn-imprimir, #btn-reset, form button[type="submit"] { display: none; }
    .content { padding: 0; margin: 0; overflow-y: visible; height: auto; background-color: white; }
    .preview-container { gap: 0; }
    .pagina-a4 {
        box-shadow: none; margin: 0; min-height: 29.7cm; /* ABNT usa 29.7cm */
        page-break-after: always;
    }
    .pagina-a4:last-child { page-break-after: avoid; }
}

/* --- RESPONSIVIDADE --- */
@media (max-width: 1200px) {
    body { flex-direction: column; }
    .sidebar { width: 100%; height: auto; position: relative; padding: 20px; }
    .content { height: auto; padding: 20px; }
    .pagina-a4 { width: 100%; min-height: auto; padding: 2cm; margin-bottom: 20px; }
}
@media (max-width: 768px) {
    .nota-apresentacao { padding-left: 0; width: 100%; margin-top: 2cm; }
    .sidebar { padding: 15px; }
    .pagina-a4 { padding: 1.5cm; }
}